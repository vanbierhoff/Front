<template>    <div class="wrapper_product">        <div class="sub_category_page" v-for="product,index in allProduct">            <div class="column_right column_right_products_container">                <div class="product__area">                    <!--TEMPLATE-->                    <div id="products_section">                        <div class="products_page pg_0">                            <div class="product product_horizontal">                                <span class="product_code">Код: {{+product.code}}</span>                                <div class="product_status_tooltip_container">                                    <span class="product_status">Наличие</span>                                </div>                                <div class="product_photo">                                    <a href="#" class="url--link product__link">                                        <img :src="product.primaryImageUrl">                                    </a>                                </div>                                <div class="product_description">                                    <a href="#" class="product__link">{{product.title}}</a>                                </div>                                <div class="product_tags hidden-sm"  >                                    <p>Могут понадобиться:</p>                                    <a href="#" class="url--link"v-for="assoc in product.assocProducts">{{assoc}}</a>                                </div>                                <div class="product_units">                                    <div class="unit--wrapper">                                        <div class="unit--select" @click="activeMeter()" v-bind:class="{'unit--active':activeQmeter}">                                            <p class="ng-binding">За м. кв.</p>                                        </div>                                        <div class="unit--select" @click="activeUnits()" v-bind:class="{'unit--active': activeUnit}">                                            <p class="ng-binding">За упаковку</p>                                        </div>                                    </div>                                </div>                                <p class="product_price_club_card">                                    <span class="product_price_club_card_text">По карте<br>клуба</span>                                    <span class="goldPrice" v-if="altPrice">{{product.priceGold}}</span>                                    <span class="goldPrice" v-else >{{product.priceGoldAlt}}</span>                                    <span class="rouble__i black__i">                                        <svg version="1.0" id="rouble__b" xmlns="http://www.w3.org/2000/svg" x="0" y="0"                                             width="30px" height="22px" viewBox="0 0 50 50"                                             enable-background="new 0 0 50 50" xml:space="preserve">                                           <use xmlns:xlink="http://www.w3.org/1999/xlink"                                                xlink:href="#rouble_black"></use>                                        </svg>                                     </span>                                </p>                                <p class="product_price_default">                                    <span class="retailPrice" v-model="price = product.priceRetail" v-if="altPrice">{{product.priceRetail}}</span>                                    <span class="retailPrice" v-else>{{product.priceRetailAlt}}</span>                                    <span class="rouble__i black__i">                                        <svg version="1.0" id="rouble__g" xmlns="http://www.w3.org/2000/svg" x="0" y="0"                                             width="30px" height="22px" viewBox="0 0 50 50"                                             enable-background="new 0 0 50 50" xml:space="preserve">                                           <use xmlns:xlink="http://www.w3.org/1999/xlink"                                                xlink:href="#rouble_gray"></use>                                        </svg>                                     </span>                                </p>                                <div class="product_price_points">                                    <p class="ng-binding">Можно купить за 231,75 балла</p>                                </div>                                <div class="list--unit-padd"></div>                                <div class="list--unit-desc">                                    <div class="unit--info">                                        <div class="unit--desc-i"></div>                                        <div class="unit--desc-t">                                            <p>                                                <span class="ng-binding">Продается упаковками:</span>                                                <span class="unit--infoInn">1 упак. = 2.47 м. кв. </span>                                            </p>                                        </div>                                    </div>                                </div>                                <div class="product__wrapper">                                    <div class="product_count_wrapper">                                        <div class="stepper">                                            <input class="product__count stepper-input"  type="text" :value="product.count">                                            <span class="stepper-arrow up"                                                  @click="                                                  product.priceGoldAlt    +=  +product.fixPriceGoldAlt                                                  product.priceGold       +=  +product.fixPriceGold                                                  product.priceRetail     +=  +product.fixPriceRetail                                                  product.priceRetailAlt  += +product.fixPriceRetailAlt                                                  product.count +=1                                                            ">                                            </span>                                            <span class="stepper-arrow down"                                                  @click="                                                      if(product.count > 1){                                                            product.count -= 1                                                            product.priceGoldAlt -= +product.fixPriceGoldAlt                                                            product.priceGold    -= +product.fixPriceGold                                                            product.priceRetail     -= +product.fixPriceRetail                                                            product.priceRetailAlt    -= +product.fixPriceRetailAlt                                                          }                                                            ">                                            </span>                                        </div>                                    </div>                                    <span class="btn btn_cart" data-url="/cart/"                                          data-product-id="9bf0afd7-5190-11e5-b9a9-00259036a192">                                        <svg class="ic ic_cart">                                           <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#cart"></use>                                        </svg>                                        <span class="ng-binding" :data-product-id="product.code" >В корзину</span>                                    </span>                                </div>                            </div>                        </div>                    </div>                    <!--TEMPLATE-->                </div>            </div>        </div>    </div></template><script>    export default {        data() {            return {                allProduct: null,                stepper:1,                altPrice: true,                activeQmeter: true,                activeUnit: false,                priceProduct: null,            }        },        methods: {            stepperDown(gold, retail) {            },            activeMeter() {                this.activeQmeter = true;                this.activeUnit = false                this.altPrice = true            },            activeUnits() {                this.altPrice = false                this.activeQmeter = false;                this.activeUnit = true            },            getAssocArray(data) {                const re = /\s*;/; // ищет 0 или более пробелов, за которыми следует точка с запятой, за которой снова следуют 0 или более пробелов                const modRe= /\.[a-z]{2,5}$/i;                const modRem= /\./;                const insertRe = /[]/;                const arrs = [];                const  modified = "_220x220_1.jpg";                data.forEach(function(el, i)  {                    let arr = el.assocProducts.split(re);                    el.assocProducts = arr;                    el.fixPriceRetail = +el.priceRetail;                    el.fixPriceRetailAlt = +el.priceRetailAlt.toFixed();                    el.fixPriceGold = +el.priceGold;                    el.fixPriceGoldAlt = +el.priceGoldAlt.toFixed();                    el.priceGoldAlt = +el.priceGoldAlt.toFixed()                    el.priceRetailAlt = +el.priceRetailAlt.toFixed()                    el.count = 1;                    el.primaryImageUrl = el.primaryImageUrl.split(modRe);                    el.primaryImageUrl = el.primaryImageUrl[0] + modified;                    arrs.push(el)                });                return arrs            },        },        async mounted(data) {            let vue = this            const url = 'products.json'            fetch(url, {                method: 'GET',                headers: {                    "Access-Control-Allow-Origin": "*",                    'Content-Type': 'application/json',                    'Accept': 'application/json'                },            }).then( function (res) {                return res.json()            })                .then( function (res) {                let arr = vue.getAssocArray(res)                vue.allProduct = arr                })        }    }</script>